<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CryptoArchaeologist</title>
  <style>
    body {
      background-color: #111;
      color: white;
      text-align: center;
      font-family: sans-serif;
      padding: 40px;
    }
    #miner {
      width: 150px;
      margin: 30px auto;
    }
    #digButton {
      font-size: 24px;
      padding: 15px 40px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 12px;
      cursor: pointer;
    }
    #result {
      margin-top: 25px;
      font-size: 22px;
      color: #ffdf00;
    }
    #progress {
      width: 300px;
      height: 20px;
      background-color: #444;
      border-radius: 10px;
      margin: 20px auto;
    }
    #progressBar {
      height: 100%;
      width: 0%;
      background-color: #00ffcc;
      border-radius: 10px;
    }
    #score {
      margin-top: 15px;
      font-size: 16px;
      color: #aaa;
    }
  </style>
</head>
<body>
  <h1>CryptoArchaeologist</h1>
  <p>–ö–ª–∏–∫–∞–π, —á—Ç–æ–±—ã –∫–æ–ø–∞—Ç—å –∏ –Ω–∞—Ö–æ–¥–∏—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã!</p>

  <img id="miner" src="https://i.gifer.com/1am7.gif" alt="Miner">

  <div id="progress">
    <div id="progressBar"></div>
  </div>

  <button id="digButton" onclick="dig()">‚õèÔ∏è –ö–æ–ø–∞—Ç—å</button>
  <div id="result"></div>
  <div id="score">–°—á—ë—Ç: 0</div>

  <script>
    let score = parseInt(localStorage.getItem('archaeo_score')) || 0;
    let clicks = 0;
    const clicksToFind = 10;  // –°–∫–æ–ª—å–∫–æ –∫–ª–∏–∫–æ–≤ –Ω—É–∂–Ω–æ –¥–ª—è –Ω–∞—Ö–æ–¥–∫–∏

    const resultEl = document.getElementById("result");
    const scoreEl = document.getElementById("score");
    const progressBar = document.getElementById("progressBar");

    scoreEl.textContent = `–°—á—ë—Ç: ${score}`;

    function dig() {
      clicks++;
      let percent = (clicks / clicksToFind) * 100;
      progressBar.style.width = `${percent}%`;

      if (clicks >= clicksToFind) {
        clicks = 0;
        progressBar.style.width = '0%';
        resultEl.textContent = "–ò—â–µ–º –∞—Ä—Ç–µ—Ñ–∞–∫—Ç...";
        fetch('/dig')
          .then(res => res.json())
          .then(data => {
            resultEl.textContent = `üßø –ù–∞–π–¥–µ–Ω–æ: ${data.result}`;
            score++;
            localStorage.setItem('archaeo_score', score);
            scoreEl.textContent = `–°—á—ë—Ç: ${score}`;
          });
      }
    }
  </script>
</body>
</html>
